<div class="container-fluid">
  <div class="row">
    <div class="col-md-3 col-12 bg-dark text-white" style="height: 100vh;">
      <h2 class="text-center py-4" routerLink="/dashboard" style="cursor: pointer;">Dashboard</h2>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link text-white" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" routerLink="/createClient">Register Clients</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" routerLink="/clientFile">Client Files</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" routerLink="/products">Products</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" routerLink="/sales">Sales</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" routerLink="/suppliers">Suppliers</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="#">Register Employee</a>
        </li>
      </ul>
    </div>
    <div class="col-md-9 col-12 bg-light">
      <div class="container py-4">
        <div class="row">
          <div class="col-md-4">
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title text-center">Ver Produtos</h5>
                <button class="btn btn-primary" (click)="toggleProducts()">
                  {{ showProducts ? 'Esconder' : 'Ver' }}
                </button>
                <ul class="list-group mt-3" *ngIf="showProducts && products.length > 0">
                  <li class="list-group-item" *ngFor="let product of products">
                    <p><strong>Nome: </strong> {{ product.name }}</p>
                    <p><strong>Preço Unitário: </strong> {{ product.unitPrice }} €</p>
                    <p><strong>Quantidade: </strong> {{ product.quantity }} unit.</p>
                    <p><strong>Stock: </strong>
                      <span *ngIf="product.available; else unavailable">DISPONÍVEL</span>
                      <ng-template #unavailable>INDISPONÍVEL</ng-template>
                    </p>
                    <p><strong>Fornecedor: </strong> {{ product.supplier?.name }}</p>
                  </li>
                </ul>
                <p class="mt-3" *ngIf="products.length === 0">Sem produtos</p>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title text-center">Editar Produtos</h5>
                <button class="btn btn-primary" (click)="toggleEditProducts()">
                  {{ showEditProducts ? 'Cancelar' : 'Editar' }}
                </button>
                <ul class="list-group mt-3" *ngIf="showEditProducts && products.length > 0">
                  <li class="list-group-item" *ngFor="let product of products">
                    <div *ngIf="selectedProduct === product; else showLabel">
                      <form>
                        <div class="form-group">
                          <label for="name">Nome</label>
                          <input type="text" class="form-control" id="name" [(ngModel)]="editedProduct.name" name="name">
                        </div>
                        <div class="form-group">
                          <label for="unitPrice">Preco Unitario</label>
                          <input type="number" class="form-control" id="unitPrice" [(ngModel)]="editedProduct.unitPrice" name="unitPrice">
                        </div>
                        <div class="form-group">
                          <label for="quantity">Quantidade</label>
                          <input type="number" class="form-control" id="quantity" [(ngModel)]="editedProduct.quantity" name="quantity">
                        </div>
                        <div class="form-group">
                          <label for="available">Disponivel</label>
                          <select class="form-control" id="available" [(ngModel)]="editedProduct.available" name="available">
                            <option value="true">Sim</option>
                            <option value="false">Não</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="quantity">Fornecedor</label>
                          <input type="text" class="form-control" id="supplier" [ngModel]="newProduct.supplier?.id" (ngModelChange)="updateSupplierId($event)" name="supplier">
                        </div>
                        <button class="btn btn-primary" (click)="updateProduct()">Salvar</button>
                        <button class="btn btn-secondary" (click)="cancelEdit()">Cancelar</button>
                        <button class="btn btn-danger" (click)="deleteProduct(product.id)">Excluir</button>
                      </form>
                    </div>
                    <ng-template #showLabel>
                      <p><strong>Nome: </strong>{{ product.name }}</p>
                      <p><strong>Preco Unitario: </strong>{{ product.unitPrice }}</p>
                      <p><strong>Quantidade: </strong>{{ product.quantity }}</p>
                      <p><strong>Disponivel: </strong>{{ product.available ? 'Sim' : 'Não' }}</p>
                      <p><strong>Fornecedor: </strong>{{ product.supplier?.id }}</p>
                      <button class="btn btn-primary" (click)="editProduct(product)">Editar</button>
                    </ng-template>
                  </li>
                </ul>
                <p class="mt-3" *ngIf="products.length === 0">Sem produtos disponiveis.</p>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title text-center">Adicionar Produtos</h5>
                <button class="btn btn-primary" (click)="toggleAddProductForm()">
                  {{ showAddProductForm ? 'Cancelar' : 'Adicionar' }}
                </button>
                <form *ngIf="showAddProductForm">
                  <div class="form-group">
                    <label for="newName">Name</label>
                    <input type="text" class="form-control" id="newName" [(ngModel)]="newProduct.name" name="newName">
                  </div>
                  <div class="form-group">
                    <label for="newUnitPrice">Unit Price</label>
                    <input type="number" class="form-control" id="newUnitPrice" [(ngModel)]="newProduct.unitPrice" name="newUnitPrice">
                  </div>
                  <div class="form-group">
                    <label for="newQuantity">Quantity</label>
                    <input type="number" class="form-control" id="newQuantity" [(ngModel)]="newProduct.quantity" name="newQuantity">
                  </div>
                  <div class="form-group">
                    <label for="newAvailable">Available</label>
                    <select class="form-control" id="newAvailable" [(ngModel)]="newProduct.available" name="newAvailable">
                      <option value="true">Sim</option>
                      <option value="false">Não</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="prodSupplier">Fornecedor</label>
                    <input type="text" class="form-control" id="prodSupplier" [ngModel]="newProduct.supplier?.id" (ngModelChange)="updateSupplierId($event)" name="prodSupplier">
                  </div>
                  <button class="btn btn-primary mt-1" (click)="addProduct()">Adicionar</button>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
